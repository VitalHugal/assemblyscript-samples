<html>
<head>
	<title>Black'n'White</title>
</head>
<body>

<canvas id="canvas" width="500" height="500" style="border: 3px solid green"></canvas>

<script>
	const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');
  const [width, height] = [canvas.width, canvas.height];

	const img = new Image();
	img.src = './waterlily.png';
  img.crossOrigin = 'anonymous';
	img.onload = () => {
    ctx.drawImage(img, 0, 0, width, height);

    const imageData = ctx.getImageData(0, 0, width, height);
    const data = imageData.data;

    for (let i = 0; i < data.length; i += 4) {
          data[i]     = 255 - data[i];     // red
          data[i + 1] = 255 - data[i + 1]; // green
          data[i + 2] = 255 - data[i + 2]; // blue
      }
    ctx.putImageData(imageData, 0, 0);
  }
</script>

</body>
</html>