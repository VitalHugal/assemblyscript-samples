import Big from '../Big';

function prec(a: string, sd: i32): string {
  return Big.of(a).prec(sd).toString();
}

describe('prec', () => {

  expect<string>(prec('0', 1)).toStrictEqual('0');
  expect<string>(prec('1', 1)).toStrictEqual('1');
  expect<string>(prec('1', 2)).toStrictEqual('1');
  expect<string>(prec('12', 1)).toStrictEqual('10');
  expect<string>(prec('12', 2)).toStrictEqual('12');
  expect<string>(prec('12', 3)).toStrictEqual('12');
  expect<string>(prec('12.3', 1)).toStrictEqual('10');
  expect<string>(prec('12.3', 2)).toStrictEqual('12');
  expect<string>(prec('12.3', 3)).toStrictEqual('12.3');

  expect<string>(prec('1230', 1)).toStrictEqual('1000');
  expect<string>(prec('1230', 2)).toStrictEqual('1200');
  expect<string>(prec('1230', 4)).toStrictEqual('1230');
  expect<string>(prec('1230', 5)).toStrictEqual('1230');
  expect<string>(prec('1230', 6)).toStrictEqual('1230');

  expect<string>(prec('5.51009648628502529901761683407913552', 23)).toStrictEqual('5.5100964862850252990176');
  expect<string>(prec('4.7639E+44979245', 3)).toStrictEqual('4.76e+44979245');
  expect<string>(prec('-1.7306315078051716446467E+1059755325', 5)).toStrictEqual('-1.7306e+1059755325');
  expect<string>(prec('1230', 6)).toStrictEqual('1230');
  expect<string>(prec('1230', 6)).toStrictEqual('1230');
  expect<string>(prec('1230', 6)).toStrictEqual('1230');

  expect<string>(prec('4985349771216.54991391072733', 21)).toStrictEqual('4985349771216.54991391');
  expect<string>(prec('1101895947.92762954984827601473036438720818296', 15)).toStrictEqual('1101895947.92763');
  expect<string>(prec('88429990502356839.49260500060049004694585658780656', 43)).toStrictEqual('88429990502356839.49260500060049004694585659');
  expect<string>(prec('88092477731945.118280704259340858', 24)).toStrictEqual('88092477731945.1182807043');
  expect<string>(prec('52352220229587840556187937111046743.458356312735390953445935426160537204', 42)).toStrictEqual('5.23522202295878405561879371110467434583563e+34');
  expect<string>(prec('9645371928851642074344527881477634345.4914341', 34)).toStrictEqual('9.645371928851642074344527881477634e+36');
  expect<string>(prec('40693051631.1251783538001747467807789871', 5)).toStrictEqual('40693000000');
  expect<string>(prec('8248561437515605126456247769501697.764296656999', 37)).toStrictEqual('8.248561437515605126456247769501697764e+33');
  expect<string>(prec('5727898467119496952445688320883475.404402704196931184674675825', 64)).toStrictEqual('5.727898467119496952445688320883475404402704196931184674675825e+33');
  expect<string>(prec('913366499416274482076806.54925361292970753237933', 2)).toStrictEqual('9.1e+23');
  expect<string>(prec('986791401418080896.725674945574053721614668858858', 51)).toStrictEqual('986791401418080896.725674945574053721614668858858');
  expect<string>(prec('8343815925404573683077429.4758959133829073879054267509464514', 21)).toStrictEqual('8.34381592540457368308e+24');
  expect<string>(prec('5222032172895746.902766092011', 21)).toStrictEqual('5222032172895746.90277');
  expect<string>(prec('8439793217442.92137711335321', 15)).toStrictEqual('8439793217442.92');
  expect<string>(prec('9.8660650336174887708269980', 28)).toStrictEqual('9.866065033617488770826998');
  expect<string>(prec('6480935501.55496974285182162603356273156890', 2)).toStrictEqual('6500000000');
  expect<string>(prec('3154176290800715548619630621.0355772810773559541', 13)).toStrictEqual('3.154176290801e+27');
  expect<string>(prec('8728384988174071448.69274', 21)).toStrictEqual('8728384988174071448.69');
  expect<string>(prec('88179259072684818766023076456.58895232320350', 39)).toStrictEqual('8.81792590726848187660230764565889523232e+28');
  expect<string>(prec('776981797289252251.093401546863758214465286704664334', 39)).toStrictEqual('776981797289252251.093401546863758214465');
  expect<string>(prec('353396834933281759072773.805789609148', 37)).toStrictEqual('3.53396834933281759072773805789609148e+23');
  expect<string>(prec('4274522263032712850.0041729873', 14)).toStrictEqual('4274522263032700000');
  expect<string>(prec('186530566473536251263.858877958474287539', 30)).toStrictEqual('186530566473536251263.858877958');
  expect<string>(prec('41.51330387617312622186860688055631484', 24)).toStrictEqual('41.5133038761731262218686');
  expect<string>(prec('892734285316609348922285835347841194677.279150490649933902110687168010', 7)).toStrictEqual('8.927343e+38');
  expect<string>(prec('2365934669507425116.685560049269016191181112056065', 37)).toStrictEqual('2365934669507425116.685560049269016191');
  expect<string>(prec('239393776.69622644151181623925655', 23)).toStrictEqual('239393776.69622644151182');
  expect<string>(prec('179.9261669', 8)).toStrictEqual('179.92617');
  expect<string>(prec('6.794242173558561804595', 20)).toStrictEqual('6.7942421735585618046');
  expect<string>(prec('630252144005109.53366072283861381792', 32)).toStrictEqual('630252144005109.53366072283861382');
  expect<string>(prec('2014467765.30542656127', 22)).toStrictEqual('2014467765.30542656127');
  expect<string>(prec('73392897409456861290131541129654.925607506690362687103367844755771', 45)).toStrictEqual('7.33928974094568612901315411296549256075066904e+31');
  expect<string>(prec('2617216902482291199973663.484710966125', 37)).toStrictEqual('2.617216902482291199973663484710966125e+24');
  expect<string>(prec('8629922951113.7511448487597458660248521234380600977', 41)).toStrictEqual('8629922951113.7511448487597458660248521234');
  expect<string>(prec('4821625627675322025353636064.57175523338580806993894351876', 33)).toStrictEqual('4.82162562767532202535363606457176e+27');
  expect<string>(prec('505291668854707.709062685721555135520850266111469308027', 23)).toStrictEqual('505291668854707.70906269');
  expect<string>(prec('579742066579367045736.9170048432302875302855793', 45)).toStrictEqual('579742066579367045736.917004843230287530285579');
  expect<string>(prec('92817.84445', 13)).toStrictEqual('92817.84445');
  expect<string>(prec('661971346000462043332006546474696174.7167702709539', 25)).toStrictEqual('6.619713460004620433320065e+35');
  expect<string>(prec('964483.4958501605537391', 2)).toStrictEqual('960000');
  expect<string>(prec('6985940160812637750037427078390489093.59724194766104006296648646911097283', 44)).toStrictEqual('6.9859401608126377500374270783904890935972419e+36');
  expect<string>(prec('22537.044131504334747686356', 7)).toStrictEqual('22537.04');
  expect<string>(prec('81309794072838871318854500310152.09295684998521', 35)).toStrictEqual('8.1309794072838871318854500310152093e+31');
  expect<string>(prec('9169434008670526360155.858673447171266307242005', 28)).toStrictEqual('9.169434008670526360155858673e+21');
  expect<string>(prec('782.8315804028036627332091761646906', 16)).toStrictEqual('782.8315804028037');
  expect<string>(prec('1236453638891742153022.8348728811', 1)).toStrictEqual('1e+21');
  expect<string>(prec('675623616750.993125132354', 2)).toStrictEqual('680000000000');
  expect<string>(prec('4239542600712473433498612753.2106014432176399255536577373285045425339', 51)).toStrictEqual('4.23954260071247343349861275321060144321763992555366e+27');
  expect<string>(prec('5500628286601049.8436636261819485793447808823573910', 31)).toStrictEqual('5500628286601049.843663626181949');
  expect<string>(prec('3974711265332457176491911497563.9361', 17)).toStrictEqual('3.9747112653324572e+30');
  expect<string>(prec('2894245566479613750113978122489420.56862841281958031877868147223357225', 53)).toStrictEqual('2.8942455664796137501139781224894205686284128195803188e+33');
  expect<string>(prec('9387762026.73267349404211844460662261461066947142829472609767844561464154020', 75)).toStrictEqual('9387762026.7326734940421184446066226146106694714282947260976784456146415402');
  expect<string>(prec('9940289055903627512125768245502992585069900170399503819515972524.13568735283721983801757702683853241247769318405229726113276035561474837566466532875876277432576610830142188269641845050335097656359864498101396326004092685742327518181101473104745549408201476216574093693733574369506676184899821529267868141813088352688031339966846243166921375083445250920', 47)).toStrictEqual('9.9402890559036275121257682455029925850699001704e+63');
  expect<string>(prec('47308500490651000672647597245353550222048575.8072142842392016063606507543350997595316613513575837073421103918284314912676250088610064455343463233565051257974791197641171878251624763412467738389496245200149213715671349161', 59)).toStrictEqual('4.7308500490651000672647597245353550222048575807214284239202e+43');
  expect<string>(prec('17069318170447559670824010313506648026528166586129880725091542343600550422997254786851016215940786230013064180480826097444101017117212949291335428804169206.4789414896747948034966909141270082719485508246318636726728954481', 125)).toStrictEqual('1.7069318170447559670824010313506648026528166586129880725091542343600550422997254786851016215940786230013064180480826097444101e+154');
});